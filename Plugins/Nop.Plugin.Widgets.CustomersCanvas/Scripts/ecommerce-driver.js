define(function(){return function(e){function t(o){if(r[o])return r[o].exports;var p=r[o]={i:o,l:!1,exports:{}};return e[o].call(p.exports,p,p.exports,t),p.l=!0,p.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(r,'a',r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=85)}([function(e,t,r){'use strict';t.a=function(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return Object(p.a)(r)?t:Object(o.a)(function(t){return e(r,t)});default:return Object(p.a)(r)&&Object(p.a)(n)?t:Object(p.a)(r)?Object(o.a)(function(t){return e(t,n)}):Object(p.a)(n)?Object(o.a)(function(t){return e(r,t)}):e(r,n);}}};var o=r(1),p=r(4)},function(e,t,r){'use strict';t.a=function(e){return function t(r){return 0===arguments.length||Object(o.a)(r)?t:e.apply(this,arguments)}};var o=r(4)},function(e,t,r){'use strict';/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,'__esModule',{value:!0});var o=r(30);t.DispatcherBase=o.DispatcherBase,t.DispatcherWrapper=o.DispatcherWrapper,t.EventListBase=o.EventListBase;var p=r(8);t.Subscription=p.Subscription},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){return function(){}}();t.Initiable=r},function(e,t){'use strict';t.a=function(e){return null!=e&&'object'==typeof e&&!0===e['@@functional/placeholder']}},function(e,t){'use strict';t.a=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(){return t.apply(this,arguments)};case 2:return function(){return t.apply(this,arguments)};case 3:return function(){return t.apply(this,arguments)};case 4:return function(){return t.apply(this,arguments)};case 5:return function(){return t.apply(this,arguments)};case 6:return function(){return t.apply(this,arguments)};case 7:return function(){return t.apply(this,arguments)};case 8:return function(){return t.apply(this,arguments)};case 9:return function(){return t.apply(this,arguments)};case 10:return function(){return t.apply(this,arguments)};default:throw new Error('First argument to _arity must be a non-negative integer no greater than ten');}}},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p=this&&this.__decorate||function(e,t,o,p){var n,a=arguments.length,s=3>a?t:null===p?p=Object.getOwnPropertyDescriptor(t,o):p;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,p);else for(var r=e.length-1;0<=r;r--)(n=e[r])&&(s=(3>a?n(s):3<a?n(t,o,s):n(t,o))||s);return 3<a&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(t,'__esModule',{value:!0});var n=r(14),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.pushAndMoveCursor=function(e){return this.push(e),this.current=e},t.prototype.moveCursorTo=function(e){var t=this.indexOf(e);return 0<=t?this.current=this[t]:this.pushAndMoveCursor(e)},t=p([n.es5ClassFix()],t),t}(Array);t.PointedArray=a},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(){}return e.prototype.isSimilar=function(e){return e.hasOwnProperty('id')&&e.hasOwnProperty('title')?this.id===e.id&&this.title===e.title:this.id===e.id||this.title===e.title},e.prototype.merge=function(e){return Object.assign(Object.create(this),e)},e.prototype.clone=function(){return this.merge(this)},e}();t.InitiableSimilar=r},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}return e.prototype.execute=function(e,t,r){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var o=this.handler;e?setTimeout(function(){o.apply(t,r)},1):o.apply(t,r)}},e}();t.Subscription=r},function(e,t,r){'use strict';function o(e,t,r){for(var o=0,p=r.length;o<p;){if(t=e['@@transducer/step'](t,r[o]),t&&t['@@transducer/reduced']){t=t['@@transducer/value'];break}o+=1}return e['@@transducer/result'](t)}function p(e,t,r){for(var o=r.next();!o.done;){if(t=e['@@transducer/step'](t,o.value),t&&t['@@transducer/reduced']){t=t['@@transducer/value'];break}o=r.next()}return e['@@transducer/result'](t)}function n(e,t,r,o){return e['@@transducer/result'](r[o](Object(s.a)(e['@@transducer/step'],e),t))}t.a=function(e,t,r){if('function'==typeof e&&(e=Object(i.a)(e)),Object(a.a)(r))return o(e,t,r);if('function'==typeof r['fantasy-land/reduce'])return n(e,t,r,'fantasy-land/reduce');if(null!=r[d])return p(e,t,r[d]());if('function'==typeof r.next)return p(e,t,r);if('function'==typeof r.reduce)return n(e,t,r,'reduce');throw new TypeError('reduce: list must be array or iterable')};var a=r(21),i=r(50),s=r(51),d='undefined'==typeof Symbol?'@@iterator':Symbol.iterator},function(e,t){'use strict';t.a=Array.isArray||function(e){return null!=e&&0<=e.length&&'[object Array]'===Object.prototype.toString.call(e)}},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(7),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(p.InitiableSimilar);t.OptionValueBase=n},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){return function(e,t){this.version=e,this.platform=t}}();t.Info=r},function(e,t){'use strict';t.a=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)}},function(e,t){'use strict';var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0}),t.es5ClassFix=function(){return function(e){return function(t){function o(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var p=t.apply(this,r)||this;return Object.setPrototypeOf(p,e.prototype),p}return r(o,t),o}(e)}}},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(6),p=function(){function e(){}return e.pushOrMergeOrCreate=function(t,r,p,n){void 0===n&&(n=!0);var a=e.find(t,p);if(null===a||void 0===a){var i=null;try{i=r(t)}catch(t){}return i&&n&&(p instanceof o.PointedArray?p.pushAndMoveCursor(i):p.push(i)),i}var s=a.merge(t);if(n){var d=p.indexOf(a);p[d]=s}return s},e.filterOrMergeOrCreate=function(t,r,o){return t.map(function(t){return e.pushOrMergeOrCreate(t,r,o,!1)}).filter(function(e){return null!==e})},e.find=function(e,t){return t.find(function(t){return t.isSimilar(e)})},e}();t.ArrayUtil=p},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(7),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(p.InitiableSimilar);t.AttributeBase=n},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(11),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.init=function(e){this.id=e.id,this.preselected=e.preselected,this.title=e.title,this.price=e.price,this.color=e.color,this.imageUrl=e.imageUrl},t}(p.OptionValueBase);t.OptionConfigValue=n},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(15),n=r(7),a=r(17),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._values=[],t}return o(t,e),t.prototype.optionValueFactoryConfig=function(e){var t=new a.OptionConfigValue;return t.init(e),t},t.prototype.optionValueSmartMerge=function(e){return p.ArrayUtil.pushOrMergeOrCreate(e,this.optionValueFactoryConfig,this.values)},Object.defineProperty(t.prototype,'valuesStrict',{get:function(){throw'Not Implemented'},set:function(e){var t=this;e.forEach(function(e){t._values.push(t.optionValueFactory(e))})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'values',{get:function(){return this._values},set:function(e){var t=this;e.forEach(function(e){t.optionValueSmartMerge(e)})},enumerable:!0,configurable:!0}),t}(n.InitiableSimilar);t.OptionBase=i},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t,r){this.err=e,this.response=t,this.body=r}return e.empty=function(){return new e(null,null,'')},e}();t.XhrArgs=r},function(e,t,r){'use strict';t.a=function(e){return function t(r,a,i){switch(arguments.length){case 0:return t;case 1:return Object(n.a)(r)?t:Object(p.a)(function(t,o){return e(r,t,o)});case 2:return Object(n.a)(r)&&Object(n.a)(a)?t:Object(n.a)(r)?Object(p.a)(function(t,r){return e(t,a,r)}):Object(n.a)(a)?Object(p.a)(function(t,o){return e(r,t,o)}):Object(o.a)(function(t){return e(r,a,t)});default:return Object(n.a)(r)&&Object(n.a)(a)&&Object(n.a)(i)?t:Object(n.a)(r)&&Object(n.a)(a)?Object(p.a)(function(t,r){return e(t,r,i)}):Object(n.a)(r)&&Object(n.a)(i)?Object(p.a)(function(t,r){return e(t,a,r)}):Object(n.a)(a)&&Object(n.a)(i)?Object(p.a)(function(t,o){return e(r,t,o)}):Object(n.a)(r)?Object(o.a)(function(t){return e(t,a,i)}):Object(n.a)(a)?Object(o.a)(function(t){return e(r,t,i)}):Object(n.a)(i)?Object(o.a)(function(t){return e(r,a,t)}):e(r,a,i);}}};var o=r(1),p=r(0),n=r(4)},function(e,t,r){'use strict';var o=r(1),p=r(10),n=r(49),a=Object(o.a)(function(e){return!!Object(p.a)(e)||!!e&&!('object'!=typeof e)&&!Object(n.a)(e)&&(1===e.nodeType?!!e.length:!(0!==e.length)||!!(0<e.length)&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))});t.a=a},function(e,t,r){'use strict';t.a=function(e,t){return function(){var r=arguments.length;if(0===r)return t();var p=arguments[r-1];return Object(o.a)(p)||'function'!=typeof p[e]?t.apply(this,arguments):p[e].apply(p,Array.prototype.slice.call(arguments,0,r-1))}};var o=r(10)},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(0),n=r(54),p=Object(o.a)(function(e,t){return Object(n.a)([e],t)});t['default']=p},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(0),p=r(41),n=r(59),a=r(9),i=r(60),s=r(25),d=r(43),u=Object(o.a)(Object(p.a)(['fantasy-land/map','map'],i.a,function(e,t){switch(Object.prototype.toString.call(t)){case'[object Function]':return Object(s.a)(t.length,function(){return e.call(this,t.apply(this,arguments))});case'[object Object]':return Object(a.a)(function(r,o){return r[o]=e(t[o]),r},{},Object(d.a)(t));default:return Object(n.a)(e,t);}}));t['default']=u},function(e,t,r){'use strict';var o=r(5),p=r(1),n=r(0),a=r(61),i=Object(n.a)(function(e,t){return 1===e?Object(p.a)(t):Object(o.a)(e,Object(a.a)(e,[],t))});t.a=i},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(27),p=function(){function e(e){this.items=[],this._parent=e}return e.prototype.update=function(e,t){var r=this._parent.price,p=null;return p=this.items.find(function(t){return t.option===e}),p||(p=new o.SelectedOption(e),this.items.push(p)),p.value=t instanceof Array?t:'string'==typeof t?[p.option.values.find(function(e){return e.title===t})]:[t],this._parent.updatePrice(r)},e.prototype.remove=function(e){var t=this._parent.price,r=null;return r='string'==typeof e?this.items.find(function(t){return t.option.title===e}):this.items.find(function(t){return t.option==e}),this.items.splice(this.items.indexOf(r),1),this._parent.updatePrice(t)},e}();t.Choices=p},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){return function(e,t){this.option=e,this.value=[],t&&(t instanceof Array?this.value=t:this.value.push(t))}}();t.SelectedOption=r},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){return function(){this.new=null}}();t.ValueUpdateEventArgs=r},function(e,t,r){'use strict';/*!
 * Strongly Typed Events for TypeScript
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,'__esModule',{value:!0});var o=r(2);t.DispatcherBase=o.DispatcherBase,t.DispatcherWrapper=o.DispatcherWrapper,t.EventListBase=o.EventListBase,t.Subscription=o.Subscription;var p=r(32);t.EventDispatcher=p.EventDispatcher,t.EventHandlingBase=p.EventHandlingBase,t.EventList=p.EventList;var n=r(34);t.SimpleEventDispatcher=n.SimpleEventDispatcher,t.SimpleEventHandlingBase=n.SimpleEventHandlingBase,t.SimpleEventList=n.SimpleEventList;var a=r(36);t.SignalDispatcher=a.SignalDispatcher,t.SignalHandlingBase=a.SignalHandlingBase,t.SignalList=a.SignalList},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(31),p=r(8),n=function(){function e(){this._wrap=new i(this),this._subscriptions=[]}return e.prototype.subscribe=function(e){var t=this;return e&&this._subscriptions.push(new p.Subscription(e,!1)),function(){t.unsubscribe(e)}},e.prototype.sub=function(e){return this.subscribe(e)},e.prototype.one=function(e){var t=this;return e&&this._subscriptions.push(new p.Subscription(e,!0)),function(){t.unsubscribe(e)}},e.prototype.has=function(e){return!!e&&this._subscriptions.some(function(t){return t.handler==e})},e.prototype.unsubscribe=function(e){if(e)for(var t=0;t<this._subscriptions.length;t++)if(this._subscriptions[t].handler==e){this._subscriptions.splice(t,1);break}},e.prototype.unsub=function(e){this.unsubscribe(e)},e.prototype._dispatch=function(e,t,r){for(var p=this,n=function(n){var i=new o.EventManagement(function(){return p.unsub(n.handler)}),s=Array.prototype.slice.call(r);if(s.push(i),n.execute(e,t,s),a.cleanup(n),!e&&i.propagationStopped)return'break'},a=this,i=0,s=this._subscriptions.slice();i<s.length;i++){var d=s[i],u=n(d);if('break'===u)break}},e.prototype.cleanup=function(e){if(e.isOnce&&e.isExecuted){var t=this._subscriptions.indexOf(e);-1<t&&this._subscriptions.splice(t,1)}},e.prototype.asEvent=function(){return this._wrap},e.prototype.clear=function(){this._subscriptions.splice(0,this._subscriptions.length)},e}();t.DispatcherBase=n;var a=function(){function e(){this._events={}}return e.prototype.get=function(e){var t=this._events[e];return t?t:(t=this.createDispatcher(),this._events[e]=t,t)},e.prototype.remove=function(e){delete this._events[e]},e}();t.EventListBase=a;var i=function(){function e(e){this._subscribe=function(t){return e.subscribe(t)},this._unsubscribe=function(t){return e.unsubscribe(t)},this._one=function(t){return e.one(t)},this._has=function(t){return e.has(t)},this._clear=function(){return e.clear()}}return e.prototype.subscribe=function(e){return this._subscribe(e)},e.prototype.sub=function(e){return this.subscribe(e)},e.prototype.unsubscribe=function(e){this._unsubscribe(e)},e.prototype.unsub=function(e){this.unsubscribe(e)},e.prototype.one=function(e){return this._one(e)},e.prototype.has=function(e){return this._has(e)},e.prototype.clear=function(){this._clear()},e}();t.DispatcherWrapper=i},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e){this.unsub=e,this.propagationStopped=!1}return e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();t.EventManagement=r},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(33);t.EventDispatcher=o.EventDispatcher,t.EventHandlingBase=o.EventHandlingBase,t.EventList=o.EventList},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(2),n=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},t.prototype.asEvent=function(){return e.prototype.asEvent.call(this)},t}(p.DispatcherBase);t.EventDispatcher=n;var a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createDispatcher=function(){return new n},t}(p.EventListBase);t.EventList=a;var i=function(){function e(){this._events=new a}return Object.defineProperty(e.prototype,'events',{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)},e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)},e}();t.EventHandlingBase=i},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(35);t.SimpleEventDispatcher=o.SimpleEventDispatcher,t.SimpleEventHandlingBase=o.SimpleEventHandlingBase,t.SimpleEventList=o.SimpleEventList},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(2),n=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},t.prototype.asEvent=function(){return e.prototype.asEvent.call(this)},t}(p.DispatcherBase);t.SimpleEventDispatcher=n;var a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createDispatcher=function(){return new n},t}(p.EventListBase);t.SimpleEventList=a;var i=function(){function e(){this._events=new a}return Object.defineProperty(e.prototype,'events',{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)},e}();t.SimpleEventHandlingBase=i},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(37);t.SignalDispatcher=o.SignalDispatcher,t.SignalHandlingBase=o.SignalHandlingBase,t.SignalList=o.SignalList},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(2),n=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},t.prototype.asEvent=function(){return e.prototype.asEvent.call(this)},t}(p.DispatcherBase);t.SignalDispatcher=n;var a=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createDispatcher=function(){return new n},t}(p.EventListBase);t.SignalList=a;var i=function(){function e(){this._events=new a}return Object.defineProperty(e.prototype,'events',{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)},e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)},e}();t.SignalHandlingBase=i},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(20),p=r(9),n=Object(o.a)(p.a);t['default']=n},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(11),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.init=function(e){this.id=e.id,this.preselected=e.preselected,this.title=e.title,this.price=e.price,this.color=e.color,this.imageUrl=e.imageUrl},t}(p.OptionValueBase);t.OptionValue=n},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t['default']=function(){if(0===arguments.length)throw new Error('pipe requires at least one argument');return Object(o.a)(arguments[0].length,Object(n['default'])(p.a,arguments[0],Object(a.a)(arguments)))};var o=r(5),p=r(48),n=r(38),a=r(52)},function(e,t,r){'use strict';t.a=function(e,t,r){return function(){if(0===arguments.length)return r();var n=Array.prototype.slice.call(arguments,0),a=n.pop();if(!Object(o.a)(a)){for(var i=0;i<e.length;){if('function'==typeof a[e[i]])return a[e[i]].apply(a,n);i+=1}if(Object(p.a)(a)){var s=t.apply(null,n);return s(a)}}return r.apply(this,arguments)}};var o=r(10),p=r(58)},function(e,t){'use strict';t.a={init:function(){return this.xf['@@transducer/init']()},result:function(e){return this.xf['@@transducer/result'](e)}}},function(e,t,r){'use strict';var o=r(1),p=r(13),n=r(62),a=!{toString:null}.propertyIsEnumerable('toString'),i=['constructor','valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'],s=function(){return arguments.propertyIsEnumerable('length')}(),d=function(e,t){for(var r=0;r<e.length;){if(e[r]===t)return!0;r+=1}return!1},u='function'!=typeof Object.keys||s?function(e){if(Object(e)!==e)return[];var t,r,o=[],u=s&&Object(n.a)(e);for(t in e)Object(p.a)(t,e)&&(!u||'length'!==t)&&(o[o.length]=t);if(a)for(r=i.length-1;0<=r;)t=i[r],Object(p.a)(t,e)&&!d(o,t)&&(o[o.length]=t),r-=1;return o}:function(e){return Object(e)===e?Object.keys(e):[]},l=Object(o.a)(u);t.a=l},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(3),n=r(6),a=r(15),i=r(45),s=r(46),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._attributes=new n.PointedArray,t._options=new n.PointedArray,t}return o(t,e),t.prototype.optionFactoryConfig=function(e){var t=new s.OptionConfig;return t.init(e),t},t.prototype.attributeFactoryConfig=function(e){var t=new i.AttributeConfig;return t.init(e),t},t.prototype.renderEditor=function(e){if(!this.owner)throw new Error('Product is created outside of the driver! You must initialize the owner property. ');return this.owner.editor.render(e,this)},t.prototype.optionSmartPush=function(e){return a.ArrayUtil.pushOrMergeOrCreate(e,this.optionFactoryConfig,this.options)},t.prototype.optionSmartFilter=function(e){return a.ArrayUtil.filterOrMergeOrCreate(e,this.optionFactoryConfig,this.options)},t.prototype.attributeSmartMerge=function(e){return a.ArrayUtil.pushOrMergeOrCreate(e,this.attributeFactoryConfig,this.attributes)},t.prototype.attributeSmartFilter=function(e){return a.ArrayUtil.filterOrMergeOrCreate(e,this.attributeFactoryConfig,this.attributes)},Object.defineProperty(t.prototype,'attributesStrict',{get:function(){throw'Not Implemented'},set:function(e){var t=this;e.forEach(function(e){t._attributes.pushAndMoveCursor(t.attributeFactory(e))})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'attributes',{get:function(){return this._attributes},set:function(e){var t=this;e.forEach(function(e){t.attributeSmartMerge(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'optionsStrict',{get:function(){throw'Not Implemented'},set:function(e){var t=this;e.forEach(function(e){t._options.pushAndMoveCursor(t.optionFactory(e))})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'options',{get:function(){return this._options},set:function(e){var t=this;e.forEach(function(e){t.optionSmartPush(e)})},enumerable:!0,configurable:!0}),t}(p.Initiable);t.ProductBase=d},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(16),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.init=function(e){this.id=e.id,this.title=e.title,this.value=e.value},t}(p.AttributeBase);t.AttributeConfig=n},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(17),n=r(18),a=r(39),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.optionValueFactory=function(e){var t=new a.OptionValue;return t.init(e),t},t.prototype.init=function(e){if(this.id=e.id,this.description=e.description,this.prompt=e.prompt,this.title=e.title,this.type=e.type,this.required=e.required,this.subType=e.subType,!e.values||!(e.values instanceof Array))if('undefined'!=typeof e.defaultValue){var t=new p.OptionConfigValue;t.title=e.defaultValue,e.values=[t]}else throw'Model of Option has no values';this.valuesStrict=e.values},t}(n.OptionBase);t.OptionConfig=i},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(p,n){function a(e){try{s(o.next(e))}catch(t){n(t)}}function i(e){try{s(o['throw'](e))}catch(t){n(t)}}function s(e){e.done?p(e.value):new r(function(t){t(e.value)}).then(a,i)}s((o=o.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,r){function o(e){return function(t){return p([e,t])}}function p(o){if(n)throw new TypeError('Generator is already executing.');for(;d;)try{if(n=1,a&&(i=a[2&o[0]?'return':o[0]?'throw':'next'])&&!(i=i.call(a,o[1])).done)return i;switch((a=0,i)&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return d.label++,{value:o[1],done:!1};case 5:d.label++,a=o[1],o=[0];continue;case 7:o=d.ops.pop(),d.trys.pop();continue;default:if((i=d.trys,!(i=0<i.length&&i[i.length-1]))&&(6===o[0]||2===o[0])){d=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){d.label=o[1];break}if(6===o[0]&&d.label<i[1]){d.label=i[1],i=o;break}if(i&&d.label<i[2]){d.label=i[2],d.ops.push(o);break}i[2]&&d.ops.pop(),d.trys.pop();continue;}o=r.call(e,d)}catch(t){o=[6,t],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,a,i,s,d={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,'__esModule',{value:!0});var a=r(26),i=r(3),s=r(28),d=r(29),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._product=null,t._quantity=1,t.data={},t.images=[],t.downloadUrls=[],t.choices=new a.Choices(t),t._onPriceChanging=new d.EventDispatcher,t._onPriceChanged=new d.EventDispatcher,t._onSubmitting=new d.EventDispatcher,t._onSubmitted=new d.EventDispatcher,t._onSaving=new d.EventDispatcher,t._onSaved=new d.EventDispatcher,t._onError=new d.EventDispatcher,t}return o(t,e),t.prototype.init=function(e){Object.keys(e).forEach(function(t){'undefined'==typeof e[t]&&delete e[t]}),this._quantity='undefined'==typeof e.quantity?1:e.quantity,this._product='undefined'==typeof e.product?null:e.product,this._settings='undefined'==typeof e.settings?null:e.settings},Object.defineProperty(t.prototype,'product',{get:function(){return this._product},enumerable:!0,configurable:!0}),t.prototype.submit=function(){return p(this,void 0,void 0,function(){var e=this;return n(this,function(){return this._onSubmitting.dispatch(this,function(){}()),[2,this._submitInternal().then(function(t){return e._onSubmitted.dispatch(e,t),t}).catch(function(t){return e._onError.dispatch(e,t.err),t})]})})},t.prototype.save=function(){return p(this,void 0,void 0,function(){var e=this;return n(this,function(){return this._onSaving.dispatch(this,function(){}()),[2,this._saveProductInternal().then(function(t){return e._onSaved.dispatch(e,t),t}).catch(function(t){return e._onError.dispatch(e,t.err),t})]})})},t.prototype.updatePrice=function(e){var t=this,r=new s.ValueUpdateEventArgs;return r.old=e,r.updatePromise=this._updatePriceInternal().then(function(e){return r.new=t.price,t._onPriceChanged.dispatch(t,r),e}).catch(function(e){return t._onError.dispatch(t,e instanceof Error?e:e.err),e}),this._onPriceChanging.dispatch(this,r),r.updatePromise},t.prototype.FormatPrice=function(e){var t=this._settings.locale,r=this._settings.currency,o=0;return o='number'==typeof e?e:parseFloat(e.replace(',','.').replace(/[^0-9\.]+/g,'')),o.toLocaleString(t,{style:'currency',currency:r})},Object.defineProperty(t.prototype,'quantity',{get:function(){return this._quantity},set:function(e){this._quantity=e,this.updatePrice(this._price)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'price',{get:function(){return this.FormatPrice(this._price)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onPriceChanging',{get:function(){return this._onPriceChanging.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onPriceChanged',{get:function(){return this._onPriceChanged.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onSubmitting',{get:function(){return this._onSubmitting.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onSubmitted',{get:function(){return this._onSubmitted.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onSaving',{get:function(){return this._onSaving.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onSaved',{get:function(){return this._onSaved.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'onError',{get:function(){return this._onError.asEvent()},enumerable:!0,configurable:!0}),t}(i.Initiable);t.OrderBase=u},function(e,t){'use strict';t.a=function(e,t){return function(){return t.call(this,e.apply(this,arguments))}}},function(e,t){'use strict';t.a=function(e){return'[object String]'===Object.prototype.toString.call(e)}},function(e,t){'use strict';t.a=function(e){return new r(e)};var r=function(){function e(e){this.f=e}return e.prototype['@@transducer/init']=function(){throw new Error('init not implemented on XWrap')},e.prototype['@@transducer/result']=function(e){return e},e.prototype['@@transducer/step']=function(e,t){return this.f(e,t)},e}()},function(e,t,r){'use strict';var o=r(5),p=r(0),n=Object(p.a)(function(e,t){return Object(o.a)(e.length,function(){return e.apply(t,arguments)})});t.a=n},function(e,t,r){'use strict';var o=r(22),p=r(1),n=r(53),a=Object(p.a)(Object(o.a)('tail',Object(n.a)(1,Infinity)));t.a=a},function(e,t,r){'use strict';var o=r(22),p=r(20),n=Object(p.a)(Object(o.a)('slice',function(e,t,r){return Array.prototype.slice.call(r,e,t)}));t.a=n},function(e,t,r){'use strict';var o=r(0),p=Object(o.a)(function(e,t){for(var r=t,o=0;o<e.length;){if(null==r)return;r=r[e[o]],o+=1}return r});t.a=p},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(1),p=r(56),n=Object(o.a)(Object(p.a)(!0));t['default']=n},function(e,t,r){'use strict';t.a=function(e){return function t(r){for(var p,n,a,i=[],s=0,d=r.length;s<d;){if(Object(o.a)(r[s]))for(p=e?t(r[s]):r[s],a=0,n=p.length;a<n;)i[i.length]=p[a],a+=1;else i[i.length]=r[s];s+=1}return i}};var o=r(21)},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(0),n=r(24),a=r(23),p=Object(o.a)(function(e,t){return Object(n['default'])(Object(a['default'])(e),t)});t['default']=p},function(e,t){'use strict';t.a=function(e){return'function'==typeof e['@@transducer/step']}},function(e,t){'use strict';t.a=function(e,t){for(var r=0,o=t.length,p=Array(o);r<o;)p[r]=e(t[r]),r+=1;return p}},function(e,t,r){'use strict';var o=r(0),p=r(42),n=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype['@@transducer/init']=p.a.init,e.prototype['@@transducer/result']=p.a.result,e.prototype['@@transducer/step']=function(e,t){return this.xf['@@transducer/step'](e,this.f(t))},e}(),a=Object(o.a)(function(e,t){return new n(e,t)});t.a=a},function(e,t,r){'use strict';function o(e,t,r){return function(){for(var a=[],i=0,s=e,d=0;d<t.length||i<arguments.length;){var u;d<t.length&&(!Object(n.a)(t[d])||i>=arguments.length)?u=t[d]:(u=arguments[i],i+=1),a[d]=u,Object(n.a)(u)||(s-=1),d+=1}return 0>=s?r.apply(this,a):Object(p.a)(s,o(e,a,r))}}t.a=o;var p=r(5),n=r(4)},function(e,t,r){'use strict';var o=r(13),p=Object.prototype.toString;t.a=function(){return'[object Arguments]'===p.call(arguments)?function(e){return'[object Arguments]'===p.call(e)}:function(e){return Object(o.a)('callee',e)}}},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(3),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(p.Initiable);t.UserBase=n},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(3),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.locale='en-US',t.currency='USD',t}return o(t,e),t}(p.Initiable);t.PluginSettingsBase=n},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(66),p=r(6),n=r(12),a=function(){function e(){this._info=new n.Info('0.0.0','n/a'),this._products=new p.PointedArray,this._orders=new p.PointedArray}return e.prototype.init=function(e,t,r,p,n,a,i){this.settings=this.settingsFactory(p),this.editor=t,this.products.pushAndMoveCursor(this.productFactory(e,this)),n?('undefined'!=typeof a&&(n.quantity=a),this.orders.moveCursorTo(n)):this.orders.pushAndMoveCursor(this.orderFactory({quantity:a,product:this.products.current,settings:this.settings})),this.user=this.userFactory(i),this.config=r.config||r,this.config=new o.ConfigProcessor(this).processConfig(r),t&&(t.driver=this)},Object.defineProperty(e.prototype,'info',{get:function(){return this._info},set:function(e){this._info=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'editor',{get:function(){return this._editor},set:function(e){this._editor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'config',{get:function(){return this._config},set:function(e){this._config=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'user',{get:function(){return this._user},set:function(e){this._user=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'settings',{get:function(){return this._settings},set:function(e){this._settings=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'products',{get:function(){return this._products},set:function(e){this._products=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,'orders',{get:function(){return this._orders},set:function(e){this._orders=e},enumerable:!0,configurable:!0}),e}();t.DriverBase=a},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e){this._driver=e}return e.prototype.processConfig=function(e){return this._config=e,this.process(e)},e.prototype.process=function(e){switch(!0){case'number'==typeof e||'boolean'==typeof e||null===e:return this.processPrimitive(e);case Array.isArray(e):return this.processArray(e);case e instanceof Object:return this.processObject(e);default:return this.processString(e);}},e.prototype.processObject=function(e){var t=this,r={};return Object.keys(e).forEach(function(o){r[o]=t.process(e[o])}),(!0===r.__ignore||'true'===r.__ignore)&&(r={}),Object.keys(r).forEach(function(e){var t=r[e];null!==t&&void 0!==t&&t.constructor===Object&&0===Object.keys(t).length&&delete r[e]}),r},e.prototype.processArray=function(e){var t=this,r=[];return e.forEach(function(e){var o=t.process(e);o.constructor===Object&&0===Object.keys(o).length||r.push(o)}),r},e.prototype.processPrimitive=function(e){return e},e.prototype.pathNavigator=function(e,t){var r=t(e),o=e.reduce(function(t,r){if('undefined'==typeof t||null===t)throw'The placeholder '+e.join('.')+' is invalid: '+r+' not found!';return Array.isArray(t)?t.find(function(e){return e.title===r}):t[r]},r);if(null===o)throw'Element in '+e.join('.')+' not found!';if('object'==typeof o)if(o.hasOwnProperty('value'))o=o.value;else if(o.hasOwnProperty('title'))o=o.title;else if(o.hasOwnProperty('name'))o=o.name;else throw'You try to insert object as a placeholder value for '+e.join('.');return o},e.prototype.replacePlaceholders=function(e,t,r){var o=this,p=t,n=p.match(e);return null!==n&&n.forEach(function(e){var t=e.slice(1,-1).split('.');p=p.replace(e,o.pathNavigator(t,r))}),p},e.prototype.processString=function(e){var t=this,r=this.replacePlaceholders(/#[^#]+#/g,e,function(){return t._driver.config});return r=this.replacePlaceholders(/%[^%]+%/g,r,function(e){var r=e.shift().toLowerCase();return{product:t._driver.products.current,order:t._driver.orders.current,info:t._driver.info,user:t._driver.user}[r]}),this.processMath(r)},e.prototype.processMath=function(e){var t=e,r=/math\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\)/g,o=e.match(r);return null!==o&&0<o.length&&o.forEach(function(e){var r=e.slice(5,-1),o=e;try{o=eval(r)}catch(e){o='0'}t=t.replace(e,o)}),this.processStringLiteral(t)},e.prototype.processStringLiteral=function(e){switch(!0){case'true'===e:return this.processPrimitive(!0);case'false'===e:return this.processPrimitive(!1);default:return e;}},e}();t.ConfigProcessor=o},,,function(e,t){'use strict';t.a=function(e,t){e=e||[],t=t||[];var r,o=e.length,p=t.length,n=[];for(r=0;r<o;)n[n.length]=e[r],r+=1;for(r=0;r<p;)n[n.length]=t[r],r+=1;return n}},,,,,,,,,,,,,,,,function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(86),n=r(90),a=r(111),i=r(112),s=r(65),d=r(12),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.info=new d.Info('2.0.0','nopcommerce'),t}return o(t,e),t.prototype.productFactory=function(e,t){var r=new p.Product;return r.init(e),r.owner=t,r},t.prototype.orderFactory=function(e){var t=new n.Order;return t.init(e),t},t.prototype.settingsFactory=function(e){var t=new i.PluginSettings;return t.init(e),t},t.prototype.userFactory=function(e){if(!e)return null;var t=new a.User;return t.init(e),t},t}(s.DriverBase);t.NopCommerceDriver=u,t.init=function(e,t,r,o,p,n,a){var i=new u;return i.init(e,t,r,o,p,n,a),i}},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(44),n=r(87),a=r(88),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.optionFactory=function(e){var t=new a.Option;return t.init(e),t},t.prototype.attributeFactory=function(e){var t=new n.Attribute;return t.init(e),t},t.prototype.init=function(e){if(this.id=e.Id,this.title=e.Name,this.description=e.ShortDescription,this.price=e.ProductPrice.PriceValue,this.sku=e.Sku,!e.ProductSpecifications||!(e.ProductSpecifications instanceof Array))throw'Model of Product has empty attributes';if(this.attributesStrict=e.ProductSpecifications,!e.ProductAttributes||!(e.ProductAttributes instanceof Array))throw'Model of Product has empty options';this.optionsStrict=e.ProductAttributes},t}(p.ProductBase);t.Product=i},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(16),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.init=function(e){this.id=e.SpecificationAttributeId,this.title=e.SpecificationAttributeName,this.value=e.ValueRaw},t}(p.AttributeBase);t.Attribute=n},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p,n=r(18),a=r(89);(function(e){e[e.list=1]='list',e[e.radio=2]='radio',e[e.checkbox=3]='checkbox',e[e.text=4]='text',e[e.textarea=10]='textarea',e[e.date=20]='date',e[e.file=30]='file',e[e.color=40]='color',e[e.image=45]='image',e[e.readonlycheckbox=50]='readonlycheckbox'})(p=t.optionTypes||(t.optionTypes={}));var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.optionValueFactory=function(e){var t=new a.OptionValue;return t.init(e),t},t.prototype.init=function(e){if(this.id=e.Id,this.description=e.Description,this.prompt=e.TextPrompt,this.title=e.Name,this.type=p[e.AttributeControlType]||p.radio.toString(),this.subType='compact',this.required=e.IsRequired,!e.Values||!(e.Values instanceof Array))throw'Model of Option has empty values';this.valuesStrict=e.Values},t}(n.OptionBase);t.Option=i},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(11),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.init=function(e){this.id=e.Id,this.preselected=e.IsPreSelected,this.title=e.Name,this.price=e.PriceAdjustmentValue,this.color=e.ColorSquaresRgb,this.imageUrl='undefined'==typeof e.ImageSquaresPictureModel?this.imageUrl:e.ImageSquaresPictureModel.FullSizeImageUrl},t}(p.OptionValueBase);t.OptionValue=n},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(p,n){function a(e){try{s(o.next(e))}catch(t){n(t)}}function i(e){try{s(o['throw'](e))}catch(t){n(t)}}function s(e){e.done?p(e.value):new r(function(t){t(e.value)}).then(a,i)}s((o=o.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,r){function o(e){return function(t){return p([e,t])}}function p(o){if(n)throw new TypeError('Generator is already executing.');for(;d;)try{if(n=1,a&&(i=a[2&o[0]?'return':o[0]?'throw':'next'])&&!(i=i.call(a,o[1])).done)return i;switch((a=0,i)&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return d.label++,{value:o[1],done:!1};case 5:d.label++,a=o[1],o=[0];continue;case 7:o=d.ops.pop(),d.trys.pop();continue;default:if((i=d.trys,!(i=0<i.length&&i[i.length-1]))&&(6===o[0]||2===o[0])){d=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){d.label=o[1];break}if(6===o[0]&&d.label<i[1]){d.label=i[1],i=o;break}if(i&&d.label<i[2]){d.label=i[2],d.ops.push(o);break}i[2]&&d.ops.pop(),d.trys.pop();continue;}o=r.call(e,d)}catch(t){o=[6,t],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,a,i,s,d={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},'function'==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,'__esModule',{value:!0});var a=r(19),i=r(91),s=r(47),d=r(92),u=r(100),l=r(40),c=r(24),y=r(23),_=r(55),f=r(57),g=r(101),h=r(102),b=r(108),v=r(109),m=r(110),P={curry:u.default,pipe:l.default,map:c.default,prop:y.default,flatten:_.default,pluck:f.default,addIndex:g.default,both:h.default,gte:v.default,__:b.default,lt:m.default},O=function(e){function t(){var t=e.call(this)||this;return t.onSubmitted.subscribe(t.RediretoToCard.bind(t)),t}return o(t,e),t.prototype.RediretoToCard=function(){location.assign(this._settings.nopCommerceBaseUrl+'/cart')},t.prototype.init=function(t){e.prototype.init.call(this,t),this._price=this._product.price*this.quantity},t.prototype.initAsReturning=function(e,t,r){this._cartItemId=e,this._designRecordId=t,this.data=r},Object.defineProperty(t.prototype,'isReturning',{get:function(){return''!==this._designRecordId&&'undefined'!=typeof this._designRecordId&&'undefined'!=typeof this._cartItemId},enumerable:!0,configurable:!0}),t.prototype.save=function(){return p(this,void 0,void 0,function(){return n(this,function(){throw new Error('Method not implemented.')})})},t.prototype._saveProductInternal=function(){return p(this,void 0,void 0,function(){return n(this,function(){throw new Error('Method not implemented.')})})},t.prototype._getUnfilledFormOptions=function(){var e=this,t=new d.QueryString(window.location.href);return t.toParamsFiltered(function(t){return-1<t.indexOf('product_attribute_')&&!e.choices.items.find(function(e){return'product_attribute_'+e.option.id===t})})},t.prototype.JSON_to_URLEncoded=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=[]);var r=r||[];if('object'==typeof e)for(var o in e)this.JSON_to_URLEncoded(e[o],t?t+'['+o+']':o,r);else r.push(t+'='+encodeURIComponent(e));return r.join('&')},t.prototype.ChoicesToSendData=function(e){var t={};return e.forEach(function(e){t[e.option.title]={option:{id:e.option.id},value:e.value}}),JSON.stringify(t)},t.prototype._post=function(e,t){return p(this,void 0,void 0,function(){var r=this;return n(this,function(){return[2,new Promise(function(o,p){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e=P.curry(function(e,t){return P.both(P.gte(P.__,e),P.lt(P.__,t))});if(e(200,300)(n.status))o(new a.XhrArgs(null,n.response,n.responseText));else{var t=new i.XhrError('Unsuccessful HTTP code received: '+n.response.statusText);t.response=n.response,t.body=n.responseText,p(new a.XhrArgs(t,n.response,n.responseText))}}},n.open('post',e,!0),'string'!=typeof t&&(t=r.JSON_to_URLEncoded(t)),n.setRequestHeader('Content-Type','application/x-www-form-urlencoded'),n.send(t)})]})})},t.prototype._submitInternal=function(){return p(this,void 0,void 0,function(){return n(this,function(){return this.isReturning?[2,this._post([this._settings.nopCommerceBaseUrl,'ccwidget/UpdateItem'].join('/'),{productId:this._product.id,designId:this._designRecordId,updateCartItemId:this._cartItemId,dataJson:JSON.stringify(this.data),imagesJson:JSON.stringify(this.images),optionsJson:this.ChoicesToSendData(this.choices.items),downloadUrlsJson:JSON.stringify(this.downloadUrls),quantity:this.quantity,formOptions:JSON.stringify(this._getUnfilledFormOptions())})]:[2,this._post([this._settings.nopCommerceBaseUrl,'ccwidget/submititem'].join('/'),{productId:this._product.id,dataJson:JSON.stringify(this.data),imagesJson:JSON.stringify(this.images),optionsJson:this.ChoicesToSendData(this.choices.items),downloadUrlsJson:JSON.stringify(this.downloadUrls),quantity:this.quantity,formOptions:JSON.stringify(this._getUnfilledFormOptions())})]})})},t.prototype._updatePriceInternal=function(){return p(this,void 0,void 0,function(){var e,t,r,o=this;return n(this,function(){return e=P.map(P.pipe(P.prop('option'),P.prop('id')))(this.choices.items),t=P.map(P.pipe(P.prop('value'),P.flatten,P.pluck('id')))(this.choices.items),r=P.addIndex(P.map)(function(t,r){return P.map(function(t){return'product_attribute_'+e[r]+'='+t})(t)},t),r.push('addtocart_'+this._product.id+'.EnteredQuantity='+this.quantity),r.push('productId='+this._product.id),r.push('validateAttributeConditions=False'),r.push('loadPicture=True'),[2,this._post([this._settings.nopCommerceBaseUrl,'shoppingcart/productdetails_attributechange'].join('/'),r.join('&')).then(function(e){var t=JSON.parse(e.body);if('undefined'==typeof t.price)throw new i.XhrError('Server response missing important data (price)',e);return o._price=t.price,e})]})})},t}(s.OrderBase);t.Order=O},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p=this&&this.__decorate||function(e,t,o,p){var n,a=arguments.length,s=3>a?t:null===p?p=Object.getOwnPropertyDescriptor(t,o):p;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,p);else for(var r=e.length-1;0<=r;r--)(n=e[r])&&(s=(3>a?n(s):3<a?n(t,o,s):n(t,o))||s);return 3<a&&s&&Object.defineProperty(t,o,s),s},n=this&&this.__metadata||function(e,t){if('object'==typeof Reflect&&'function'==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,'__esModule',{value:!0});var a=r(14),i=r(19),s=function(e){function t(t,r){var o=e.call(this,t)||this;return'undefined'!=typeof r&&(o.body=r.body,o.response=r.response),o}return o(t,e),t=p([a.es5ClassFix(),n('design:paramtypes',[String,i.XhrArgs])],t),t}(Error);t.XhrError=s},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(93),p=r(40),n=r(97),a=r(98),i=r(99),s=function(){function e(e){this._url='',this._url=e}return e.prototype.toParams=function(){var e={},t=this._url.match(/[(\?|\&)]([^=]+)\=([^&#]*)/g)||[];return t.forEach(function(t){t=t.replace(/^\?|\&/,'');var r=t.split('='),o=r[0],p=r[1];if(0<p.length){e[o]=decodeURIComponent(p.replace(/\+/g,' '));var n=parseFloat(e[o]);isNaN(n)||(e[o]=n)}}),e},e.prototype.toParamsFiltered=function(e){return p.default(a.default,o.default(n.default(e)),i.default)(this.toParams(),e)},e}();t.QueryString=s},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(0),p=r(41),n=r(94),a=r(95),i=r(9),s=r(96),d=r(43),u=Object(o.a)(Object(p.a)(['filter'],s.a,function(e,t){return Object(a.a)(t)?Object(i.a)(function(r,o){return e(t[o])&&(r[o]=t[o]),r},{},Object(d.a)(t)):Object(n.a)(e,t)}));t['default']=u},function(e,t){'use strict';t.a=function(e,t){for(var r=0,o=t.length,p=[];r<o;)e(t[r])&&(p[p.length]=t[r]),r+=1;return p}},function(e,t){'use strict';t.a=function(e){return'[object Object]'===Object.prototype.toString.call(e)}},function(e,t,r){'use strict';var o=r(0),p=r(42),n=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype['@@transducer/init']=p.a.init,e.prototype['@@transducer/result']=p.a.result,e.prototype['@@transducer/step']=function(e,t){return this.f(t)?this.xf['@@transducer/step'](e,t):e},e}(),a=Object(o.a)(function(e,t){return new n(e,t)});t.a=a},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(0),p=Object(o.a)(function(e,t){return e.apply(this,t)});t['default']=p},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(1),p=r(13),n=Object(o.a)(function(e){var t=[];for(var r in e)Object(p.a)(r,e)&&(t[t.length]=[r,e[r]]);return t});t['default']=n},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(1),p=Object(o.a)(function(e){for(var t={},r=0;r<e.length;)t[e[r][0]]=e[r][1],r+=1;return t});t['default']=p},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(1),p=r(25),n=Object(o.a)(function(e){return Object(p.a)(e.length,e)});t['default']=n},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(69),p=r(1),n=r(25),a=Object(p.a)(function(e){return Object(n.a)(e.length,function(){var t=0,r=arguments[0],p=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0);return n[0]=function(){var e=r.apply(this,Object(o.a)(arguments,[t,p]));return t+=1,e},e.apply(this,n)})});t['default']=a},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(0),p=r(103),n=r(104),a=r(105),i=Object(o.a)(function(e,t){return Object(p.a)(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:Object(a.a)(n.a)(e,t)});t['default']=i},function(e,t){'use strict';t.a=function(e){return'[object Function]'===Object.prototype.toString.call(e)}},function(e,t,r){'use strict';var o=r(0),p=Object(o.a)(function(e,t){return e&&t});t.a=p},function(e,t,r){'use strict';var o=r(1),p=r(106),n=Object(o.a)(function(e){return Object(p.a)(e.length,e)});t.a=n},function(e,t,r){'use strict';var o=r(0),p=r(9),n=r(107),a=r(25),i=r(24),s=Object(o.a)(function(e,t){var r=Object(a.a)(e,t);return Object(a.a)(e,function(){return Object(p.a)(n.a,Object(i['default'])(r,arguments[0]),Array.prototype.slice.call(arguments,1))})});t.a=s},function(e,t,r){'use strict';var o=r(69),p=r(0),n=r(9),a=r(24),i=Object(p.a)(function(e,t){return'function'==typeof t['fantasy-land/ap']?t['fantasy-land/ap'](e):'function'==typeof e.ap?e.ap(t):'function'==typeof e?function(r){return e(r)(t(r))}:Object(n.a)(function(e,r){return Object(o.a)(e,Object(a['default'])(r,t))},[],e)});t.a=i},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t['default']={"@@functional/placeholder":!0}},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(0),p=Object(o.a)(function(e,t){return e>=t});t['default']=p},function(e,t,r){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=r(0),p=Object(o.a)(function(e,t){return e<t});t['default']=p},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(63),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.init=function(e){this.id=e.UserId,this.isLogged=e.IsAuthenticated},t}(p.UserBase);t.User=n},function(e,t,r){'use strict';var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(t,'__esModule',{value:!0});var p=r(64),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.init=function(e){if(e.Currency.Code&&(this.currency=e.Currency.Code),e.Currency.Locale&&(this.locale=e.Currency.Locale),this.ccIdAttributeId=e.CcIdAttributeId,this.customersCanvasBaseUrl=e.ServerHostUrl,!this.customersCanvasBaseUrl)throw'Customer\'s Canvas base URL is not specified in the plugin settings. Go to Administration -> Configuration -> Plugins -> Local Plugins -> CustomersCanvas -> Configure and set a URL to the Customer\'s Canvas instance there.';if(this.nopCommerceBaseUrl=e.NopCommerceBaseUrl.replace(/\/$/,''),!this.nopCommerceBaseUrl)throw'NopCommerce base URL is not specified. Make sure that the ecommerce driver version matches your plugin.'},t}(p.PluginSettingsBase);t.PluginSettings=n}])});