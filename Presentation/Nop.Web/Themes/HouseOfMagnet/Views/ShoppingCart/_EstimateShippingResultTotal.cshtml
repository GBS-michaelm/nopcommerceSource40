@model EstimateShippingModel
@using Nop.Web.Models.ShoppingCart;
@{
    var currentURL = Request.Url.AbsolutePath;
}
@if (Model.Enabled)
{
    using (Html.BeginRouteForm("GBSEstimateShippingTotal", FormMethod.Post, new { enctype = "multipart/form-data", id = "shopping-cart-form" }))
    {
        <div id="estimate-shipping-total-wrap" class="gbs-no-display">
            @*<script type="text/javascript">
                $(document).ready(function () {
                    $("#@Html.IdFor(model => model.CountryId)").change(function () {
                        var selectedItem = $(this).val();
                        var ddlStates = $("#@Html.IdFor(model => model.StateProvinceId)");
                        var estimateProgress = $("#estimate-shipping-loading-progress");
                        estimateProgress.show();
                        $.ajax({
                            cache: false,
                            type: "GET",
                            url: "/country/getstatesbycountryid",
                            data: { "countryId": selectedItem, "addSelectStateItem": "false" },
                     success: function(data) {
                         ddlStates.html('');
                         $.each(data, function(id, option) {
                             ddlStates.append($('<option></option>').val(option.id).html(option.name));
                         });
                         estimateProgress.hide();
                     },
                     error: function(xhr, ajaxOptions, thrownError) {
                         alert('Failed to retrieve states.');
                         estimateProgress.hide();
                     }
                 });
                    });
                });
            </script>*@

     

               
             

   
            <input type="hidden" name="urlname" value="@currentURL" />
                <div class="col-md-6 col-xs-6 col-sm-6">
                   <input class="zip-input form-control" id="ZipPostalCode" name="ZipPostalCode" value="" type="text">
                </div>
                <div class="col-md-6 col-xs-6 col-sm-6">
                    <input id="estimate-shipping-button-total" type="submit" value="@T("ShoppingCart.EstimateShipping.Button")" class="button button-3d button-small button-rounded button-teal" />
                </div>

   

            </div>
    }

}
@*<script type="text/javascript">
    $(document).ready(function () {
        $('#estimate-shipping-button-total').click(function() {
            displayAjaxLoading(true);
            $.ajax({
                cache: false,
                type: "POST",
                url: "/cart/estimateshipping",
                data: JSON.stringify({
                    'ZipPostalCode': $("#ZipPostalCode").val()}),
                success: function(data) {
                    displayAjaxLoading();
                    console.log(data);
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    displayAjaxLoading();
                    alert('Failed to retrieve estimate shipping.');
                }
            });
        });
    });
</script>*@